!function(e,n){function t(e){if(e instanceof Array)return{path:e,str:e.join(".")};if("string"==typeof e)return{path:e.split("."),str:e}}function s(e,n){if(0!==n.length&&void 0!==e){var s=t(n);if(s){n=s.path;for(var r=0;r<n.length;r++)if(e=e[n[r]],void 0===e)return;return e}}}function r(e,n,t){return Object.defineProperty(e,n,{enumerable:!1,value:t}),e}e&&(n=module.exports);var a=e?process.nextTick:n.requestAnimationFrame,o={jobs:{},scheduled:!1,add:function(e,n,t){var s=this;s.jobs[e]=t?n.bind(t):n,s.scheduled===!1&&(s.scheduled=!0,a(function(){s.scheduled=!1;for(var e in s.jobs)s.jobs.hasOwnProperty(e)&&(s.jobs[e](),delete s.jobs[e])}))}},d=0,i=function(e,n,a,c){if("object"==typeof e&&"function"==typeof a){var f=t(n);if(f){for(var p=f.path,u=f.str,l=p[0],h=[],$=0;$<p.length;$++)h.push(p[$]);var b,v=h.splice(1,h.length),y=v.join("."),j=l===u,k=e.$$p;k||(r(e,"$$p",{}),k=e.$$p,r(k,"$properties",{}),r(k,"$id",++d)),void 0===b&&(b=k.$id);var g=k.$properties[l];if(!g){g=k.$properties[l]={$self:[],$descendants:{}};var m=e[l];Object.defineProperty(e,l,{get:function(){return m},set:function(e){return O(e,m),m=e}});var O=function(e,n){for(var t in g.$descendants)if(g.$descendants.hasOwnProperty(t)){for(var r in g.$descendants[t].callbacks){var a=g.$descendants[t].callbacks[r],d=b+t+r;o.add(d,function(){this.cb(s(e,this.key),n)},{key:t,cb:a})}o.add(b+t,function(){this.$prop.$descendants[this.descendantKey].bindWatcher()},{$prop:g,descendantKey:t})}j&&o.add(b+l,function(){for(var t=0;t<this.$prop.$self.length;t++)this.$prop.$self.hasOwnProperty(t)&&this.$prop.$self[t](e,n)},{$prop:g})}}j?(g.$self.push(a),c||a(e[l])):(g.$descendants[y]?g.$descendants[y].callbacks.push(a):(g.$descendants[y]={callbacks:[a],bindWatcher:function(){e.hasOwnProperty(l)&&void 0!==e[l]&&i(e[l],v,function(e,n){for(var t=0;t<g.$descendants[y].callbacks.length;t++)g.$descendants[y].callbacks[t](e,n)},!0)}},g.$descendants[y].bindWatcher()),c||a(s(e[l],v)))}}};n.AsyncWatch=i}("undefined"!=typeof module&&module.exports,this);