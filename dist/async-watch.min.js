!function(e,n){function t(e,n){if(0!==n.length&&void 0!==e){n=n instanceof Array?n:n.split(".");for(var t=0;t<n.length;t++)if(e=e[n[t]],void 0===e)return;return e}}function s(e,n,t){return Object.defineProperty(e,n,{enumerable:!1,value:t}),e}e&&(n=module.exports);var r=e?process.nextTick:n.requestAnimationFrame,o={jobs:{},scheduled:!1,add:function(e,n,t){var s=this;s.jobs[e]=t?n.bind(t):n,s.scheduled===!1&&(s.scheduled=!0,r(function(){s.scheduled=!1;for(var e in s.jobs)s.jobs.hasOwnProperty(e)&&(s.jobs[e](),delete s.jobs[e])}))}},d=0,a=function(e,n,r,i){if("object"==typeof e&&"function"==typeof r){var c,f=n;if(n instanceof Array)c=n,f=n.join(".");else{if("string"!=typeof n)return;c=n.split(".")}for(var p=c[0],l=[],u=0;u<c.length;u++)l.push(c[u]);var $,h=l.splice(1,l.length),b=h.join("."),v=p===f,y=e.$$p;y||(s(e,"$$p",{}),y=e.$$p,s(y,"$properties",{}),s(y,"$id",++d)),void 0===$&&($=y.$id);var j=y.$properties[p];if(!j){j=y.$properties[p]={$self:[],$descendants:{}};var k=e[p];Object.defineProperty(e,p,{get:function(){return k},set:function(e){return g(e,k),k=e}});var g=function(e,n){for(var s in j.$descendants)if(j.$descendants.hasOwnProperty(s)){for(var r in j.$descendants[s].callbacks){var d=j.$descendants[s].callbacks[r],a=$+s+r;o.add(a,function(){this.cb(t(e,this.key),n)},{key:s,cb:d})}o.add($+s,function(){this.$prop.$descendants[this.descendantKey].bindWatcher()},{$prop:j,descendantKey:s})}v&&o.add($+p,function(){for(var t=0;t<this.$prop.$self.length;t++)this.$prop.$self.hasOwnProperty(t)&&this.$prop.$self[t](e,n)},{$prop:j})}}v?(j.$self.push(r),i||r(e[p])):(j.$descendants[b]?j.$descendants[b].callbacks.push(r):(j.$descendants[b]={callbacks:[r],bindWatcher:function(){e.hasOwnProperty(p)&&void 0!==e[p]&&a(e[p],h,function(e,n){for(var t=0;t<j.$descendants[b].callbacks.length;t++)j.$descendants[b].callbacks[t](e,n)},!0)}},j.$descendants[b].bindWatcher()),i||r(t(e[p],h)))}};n.AsyncWatch=a}("undefined"!=typeof module&&module.exports,this);