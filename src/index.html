<!DOCTYPE html>
<html lang="en">
<head >
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">


<title>AsyncWatch</title>
<script src="/async-watch.js"></script>

<body >
<script>
var obj = {
   users : [{name : "John"}, {name : "Bob"}]
}
window.obj = obj;
AsyncWatchArray(obj, 'users', function(array,events){
   console.warn("1>>")
   for(var i in events){
      var e = events[i]
      if(e.name === "init"){
         console.log("CREATE ARRAY",array);
      } else {
         console.log(e.name, e.data)
      }
   }
   console.log('1 < *******')
});
// AsyncWatchArray(obj, 'users', function(array,events){
//    console.warn("2>>")
//    for(var i in events){
//       var e = events[i]
//       if(e.name === "init"){
//          console.log("CREATE ARRAY",array);
//       } else {
//          console.log(e.name, e.data)
//       }
//    }
//    console.log('2 < *******')
// });
obj.users.push({name : 0})
obj.users.push({name : 1})
//
setTimeout(function(){
   obj.users.push({name : 2})
   obj.users.push({name : 3})
   obj.users = [{name : 3}]

},0)
//
//
// setTimeout(function(){
//    obj.users.push({name : 4})
//
// },1)




// var subscription = AsyncWatch.subscribe([watcher1, watcher2], function(changes){
//    console.log(changes)
// })
// obj.c = {
//    d : 5
// }
</script>
</body>
</html>
